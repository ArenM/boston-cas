.c-card.c-card-flush
  .c-card__content
    = simple_form_for :checkboxes do |f|
      %p= page_entries_info @matches
      %p= paginate @matches
      %table.table.table-striped
        %thead
          %tr
            %th Client Name
            %th.text-center= priority_label
            %th.text-center Other Active Matches
            %th.text-center Activate Match?
        %tbody
          - @matches.each do |client|
            - hide_client_name = (client.confidential? || client.active_in_match.try(:confidential?)) && ! params[:confidential_override]
            - if hide_client_name
              - name = "(name hidden)"
            - else
              - name = client.name
            - if active_client_ids.include?(client.id)
              %tr.client--match-active
                %td= link_to name, client_path(client)
                %td.text-center= priority_value(client)
                %td.text-center
                  = render 'client_match_routes', client: client
                %td.text-center= link_to 'Current Active Match', match_path(match)
            - else
              %tr
                %td= link_to name, client_path(client)
                %td.text-center= priority_value(client)
                %td.text-center
                  = render 'client_match_routes', client: client
                - if @opportunity.match_route.should_activate_match
                  = render 'activate_button', client: client
                - else
                  = render 'activate_checkbox', client: client, f: f
      %p=paginate @matches
      - if not @opportunity.match_route.should_activate_match
        .float-right= f.button :submit, value: 'Activate Matches'